\documentclass[a4paper,12pt]{article}
\input{commons/preamble}
\graphicspath{{polytech/etc/os/subfiles/images/}}

\begin{document}
    \input{polytech/etc/os/subfiles/titlepage}
    
    \hfconfiguration{Файловая система FAT}{}{} 
    
    \tableofcontents
    
    \section{Вступление}

    Файловая система FAT изначально была разработана в 1970-х годах Марком МакДональдом и Биллом Гейтсом для использования на дискетах, и стала стандартом в MS-DOS и ранних версиях Windows. Несмотря на свой довольно большой возраст, FAT до сих пор используется на флэшках и некоторых других твердотельных накопителях. За всю свою историю она подверглась множеству изменений, однако сохранила свои ключевые идеи.

    \section{Сравнение с NTFS}

    Стандартом в Windows сейчас является современная файловая система NTFS, которая по многим характеристикам заметно обгоняет наиболее популярные версии FAT. Разница в характеристиках представлена в таблице~\ref{tab:ntfs}
    
    \begin{table}[H]
        \centering
        \begin{tabular}{|c|c|c|c|c|}
        \hline
                                                                              & NTFS                                                                      & FAT32                                                                    & FAT16                                                                    & FAT12                                                                    \\ \hline
        \begin{tabular}[c]{@{}c@{}}Максимальный\\ размер раздела\end{tabular} & 2ТБ                                                                       & 32ГБ                                                                     & 4ГБ                                                                      & 16Мб                                                                     \\ \hline
        \begin{tabular}[c]{@{}c@{}}Максимальный\\ размер файла\end{tabular}   & 16ТБ                                                                      & 4ГБ                                                                      & 2ГБ                                                                      & $<$16Мб                                                                  \\ \hline
        Размер блока                                                          & 4КБ                                                                       & $4 - 32$ КБ                                                              & $2 - 64$ КБ                                                              & $0.5 - 4$ КБ                                                             \\ \hline
        Отказоустойчивость                                                    & Да                                                                        & Нет                                                                      & Нет                                                                      & Нет                                                                      \\ \hline
        Сжатие                                                                & Да                                                                        & Нет                                                                      & Нет                                                                      & Нет                                                                      \\ \hline
        Совместимость                                                         & \begin{tabular}[c]{@{}c@{}}Windows\\ 10/8/7/XP/\\ Vista/2000\end{tabular} & \begin{tabular}[c]{@{}c@{}}Windows\\ ME/2000/\\ XP/7/8.1/10\end{tabular} & \begin{tabular}[c]{@{}c@{}}Windows\\ ME/2000/\\ XP/7/8.1/10\end{tabular} & \begin{tabular}[c]{@{}c@{}}Windows\\ ME/2000/\\ XP/7/8.1/10\end{tabular} \\ \hline
        \end{tabular}
        \caption{Сравнение FAT и NTFS}
        \label{tab:ntfs}
    \end{table}
    
    \section{Устройство файловой системы}

    Первоначально следует отметить, что система FAT обладает высокой надежностью и эффективностью в хранении данных благодаря своей основной идее -- представлению каждого файла в виде списка связанных блоков. Эта концепция позволяет оптимально распределить информацию в файловой системе, обеспечивая быстрый доступ к данным, а также возможность быстрого обнаружения и устранения ошибок при их возникновении.

    В связи с этим, важной ролью в системе FAT играет таблица размещения файлов, которая содержит информацию о последовательности соединенных блоков. Таким образом, каждый файл имеет свой уникальный адрес, который помогает системе быстро находить его и обеспечивать управление им.
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.8\linewidth]{img2}
        \caption{Пример работы таблицы размещения}
    \end{figure}
    В целях расширения функциональности системы разработчики добавили в нее таблицу каталогов, которая содержит информацию о том, какой блок в файле является первым. Эта таблица выступает важной связующей позицией между таблицей размещения файлов и фактическим расположением данных на диске.
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.8\linewidth]{img3}
        \caption{Пример работы таблицы каталогов}
    \end{figure}
    Однако при использовании системы FAT возникает некоторое количество вопросов, которые требуют дополнительных разъяснений. К примеру, как система определяет адрес root-директории? В данном случае стоит отметить, что адрес root-директории является зарезервированным и всегда известен системе. Это позволяет обеспечить корректную работу всей файловой системы, гарантированный доступ к данным и защиту от ошибок.
    
    Следовательно, использование системы FAT - это надежный и эффективный способ хранения информации, который обеспечивает быстрый доступ к данным, а также возможность быстрого обнаружения и устранения ошибок. Однако для полного понимания ее работы стоит изучить особенности ее устройства и принципов функционирования.

    \section{Практическая часть}
    
    Устройство файловой системы можно просмотреть на живом примере с помощью специализированных hex-редакторов.
    
    \begin{figure}[H]
        \centering
        \includegraphics[width=\linewidth]{img1}
    \end{figure}

    С помощью ASCII-дешифратора справа от таблицы байтов можно сразу увидеть знакомые слова. В самой первой строчке присутствует запись «MSDOS5.0», которая обозначает операционную систему, на которой проводилось форматирование файловой системы. В целях сохранения обратной совместимости, обычно в этом поле указываются более старые системы, как, например, в данном случае, несмотря на то, что последнее форматирование проводилось на Windows 10. На строке $50$ видно обозначение файловой системы — FAT32.
    
    В байтах $0B_{16}$ и $0C_{16}$ записан размер сектора системы в байтах. В данном случае — $200_{16}$ = $512_{10}$. В байтах $0E_{16}$ и $0F_{16}$ содержится информация о количестве секторов, выделенных под резервную область файловой системы — $0A68_{16}$ = $2664_{10}$. С помощью этой информации можно узнать местонахождение самой файловой таблица, которая будет находится в секторе под номером $A68_{16}$. Прежде чем перейти к самой таблице, стоит обратить внимание ещё на некоторые значения: в байтах $32$ и $33$ хранится информация о местонахождении резервной копии метаданных — $0006$.
    
    \begin{figure}[H]
        \centering
        \includegraphics[width=\linewidth]{img0}
    \end{figure}
    
    Перейдя в сектор с номером $6$ можно действительно увидеть копию той информации, которая только что рассматривалась.
    
    \section{Список использованных источников}

    \begin{itemize}
        \item \url{https://www.udacity.com/course/gt-refresher-advanced-os--ud098}
        \item \url{https://shorturl.at/hnFWZ}
        \item \url{https://www.youtube.com/watch?v=FQ_xeY0eCpA&ab_channel=AlekOS}
    \end{itemize}

\end{document}